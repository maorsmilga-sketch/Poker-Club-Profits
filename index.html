<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker Web Calc</title>
    <style>
        :root {
            --bg-color: #1b1b1b;
            --card-bg: #ffffff;
            --accent-green: #2ecc71;
            --accent-red: #e74c3c;
            --accent-gold: #f1c40f;
            --text-color: #ecf0f1;
            --input-bg: #34495e;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px;
            box-sizing: border-box;
        }

        h1 { margin: 10px 0 20px 0; font-weight: 300; letter-spacing: 2px; color: var(--accent-gold); font-size: 1.8rem; }

        /* ×§×•× ×˜×™×™× ×¨×™× */
        .table-section {
            background: #2c3e50;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 500px;
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        .label { font-size: 0.9rem; color: #bdc3c7; margin-bottom: 8px; display: block; }

        .cards-container {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 10px;
        }

        /* ×¢×™×¦×•×‘ ×§×œ×£ */
        .card-slot {
            width: 18%; /* ×’××™×© ×œ××•×‘×™×™×œ */
            aspect-ratio: 2/3;
            max-width: 60px;
            background: rgba(255,255,255,0.1);
            border: 2px dashed #7f8c8d;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            position: relative;
        }
        
        .card-slot.filled {
            background: var(--card-bg);
            border: 2px solid #fff;
            color: #333;
            text-shadow: none;
        }
        
        .card-slot.red { color: #c0392b; }
        .card-slot.black { color: #2c3e50; }

        /* ×§×œ×˜×™× ×•×›×¡×£ */
        .inputs-row {
            display: flex;
            gap: 15px;
        }

        .input-group { flex: 1; }
        
        input[type="number"] {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            background: var(--input-bg);
            color: white;
            font-size: 1.2rem;
            text-align: center;
            box-sizing: border-box; /* ×—×©×•×‘ ×œ×× ×™×¢×ª ×’×œ×™×©×” */
        }
        
        .money-display {
            font-size: 0.85rem;
            margin-top: 5px;
            font-weight: bold;
            opacity: 0.9;
        }

        /* ×ª×•×¦××•×ª */
        .results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            width: 100%;
            max-width: 500px;
        }

        .result-box {
            background: var(--input-bg);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .result-value { font-size: 1.8rem; font-weight: bold; margin-top: 5px; direction: ltr; }
        
        .recommendation {
            grid-column: span 2;
            padding: 15px;
            font-size: 1.3rem;
            background: #22303f;
            border: 2px solid var(--accent-gold);
            font-weight: bold;
        }

        /* Modal Selector */
        #card-selector {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .selector-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 90%;
            max-width: 400px;
        }

        .select-btn {
            padding: 15px;
            font-size: 1.4rem;
            background: #ecf0f1;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            color: #333;
            font-weight: bold;
        }
        
        .suits-grid { display: none; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 80%; max-width: 300px; }
        .suit-btn { font-size: 3.5rem; background: white; padding: 10px; border-radius: 10px; cursor: pointer; border: none; }
        .suit-btn:disabled { opacity: 0.3; cursor: not-allowed; filter: grayscale(100%); }

        .cancel-btn {
            margin-top: 30px;
            padding: 10px 30px;
            background: transparent;
            color: white;
            border: 1px solid white;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
        }

    </style>
</head>
<body>

    <h1>TEXAS AI</h1>

    <div class="table-section">
        <span class="label">×”×™×“ ×©×œ×™ (My Hand)</span>
        <div class="cards-container" id="my-hand">
            <div class="card-slot" onclick="openSelector(this)">+</div>
            <div class="card-slot" onclick="openSelector(this)">+</div>
        </div>

        <span class="label">×§×œ×¤×™ ×§×”×™×œ×” (Board)</span>
        <div class="cards-container" id="board">
            <div class="card-slot" onclick="openSelector(this)">+</div>
            <div class="card-slot" onclick="openSelector(this)">+</div>
            <div class="card-slot" onclick="openSelector(this)">+</div>
            <div class="card-slot" onclick="openSelector(this)">+</div>
            <div class="card-slot" onclick="openSelector(this)">+</div>
        </div>
    </div>

    <div class="table-section">
        <div class="inputs-row">
            <div class="input-group">
                <span class="label">×§×•×¤×” (×¦'×™×¤×™×)</span>
                <input type="number" id="pot-size" placeholder="100" oninput="calculate()">
                <div id="pot-money" class="money-display" style="color: var(--accent-green)">â‚ª0</div>
            </div>
            <div class="input-group">
                <span class="label">×œ×”×©×•×•×ª (×¦'×™×¤×™×)</span>
                <input type="number" id="to-call" placeholder="20" oninput="calculate()">
                <div id="call-money" class="money-display" style="color: var(--accent-red)">â‚ª0</div>
            </div>
        </div>
    </div>

    <div class="results">
        <div class="result-box">
            <span class="label">Equity (×¡×™×›×•×™)</span>
            <div class="result-value" id="equity-val" style="color: var(--accent-gold)">--%</div>
        </div>
        <div class="result-box">
            <span class="label">Pot Odds (×™×—×¡)</span>
            <div class="result-value" id="pot-odds-val">--%</div>
        </div>
        <div class="result-box recommendation" id="recommendation-box">
            ×”×–×Ÿ ×™×“ ×œ×—×™×©×•×‘
        </div>
    </div>

    <div id="card-selector">
        <h2 id="selector-title" style="color:white; margin-bottom:20px;">×‘×—×¨ ×¢×¨×š</h2>
        
        <div class="selector-grid" id="ranks-grid"></div>

        <div class="suits-grid" id="suits-grid"></div>
        
        <button class="cancel-btn" onclick="closeSelector()">×‘×™×˜×•×œ</button>
    </div>

    <script>
        // --- ××©×ª× ×™× ×•×”×’×“×¨×•×ª ---
        let currentSlot = null;
        let selectedRank = null;
        const ranks = ['A','K','Q','J','T','9','8','7','6','5','4','3','2'];
        const suitSymbols = {'h':'â™¥', 'd':'â™¦', 'c':'â™£', 's':'â™ '};
        
        // ×™×¦×™×¨×ª ×’×¨×™×“ ×”××¡×¤×¨×™× (×¨×¥ ×¤×¢× ××—×ª ×‘×˜×¢×™× ×”)
        const ranksGrid = document.getElementById('ranks-grid');
        ranks.forEach(r => {
            let btn = document.createElement('button');
            btn.className = 'select-btn';
            btn.innerText = r;
            btn.onclick = () => selectRank(r);
            ranksGrid.appendChild(btn);
        });

        // --- ×‘×“×™×§×ª ×§×œ×¤×™× ×ª×¤×•×¡×™× ---
        function getTakenCards() {
            const taken = [];
            document.querySelectorAll('.card-slot.filled').forEach(slot => {
                // ××ª×¢×œ××™× ××”×§×œ×£ ×©×× ×—× ×• ×¢×•×¨×›×™× ×›×¨×’×¢ ×›×“×™ ×œ××¤×©×¨ ×ª×™×§×•×Ÿ
                if (slot !== currentSlot && slot.dataset.value) {
                    taken.push(slot.dataset.value);
                }
            });
            return taken;
        }

        // --- × ×™×”×•×œ ×¤×ª×™×—×ª/×¡×’×™×¨×ª ×‘×•×¨×¨ ×”×§×œ×¤×™× ---
        function openSelector(slotElement) {
            currentSlot = slotElement;
            document.getElementById('card-selector').style.display = 'flex';
            resetSelectorView();
        }

        function closeSelector() {
            document.getElementById('card-selector').style.display = 'none';
            currentSlot = null;
            selectedRank = null;
        }

        function resetSelectorView() {
            document.getElementById('ranks-grid').style.display = 'grid';
            document.getElementById('suits-grid').style.display = 'none';
            document.getElementById('selector-title').innerText = "×‘×—×¨ ×¢×¨×š";
        }

        // --- ×©×œ×‘ 1: × ×‘×—×¨ ××¡×¤×¨ ---
        function selectRank(rank) {
            selectedRank = rank;
            document.getElementById('ranks-grid').style.display = 'none';
            const suitsGrid = document.getElementById('suits-grid');
            suitsGrid.style.display = 'grid';
            document.getElementById('selector-title').innerText = "×‘×—×¨ ×¦×•×¨×” ×¢×‘×•×¨ " + rank;

            // ×™×¦×™×¨×” ××—×“×© ×©×œ ×›×¤×ª×•×¨×™ ×”×¦×•×¨×•×ª ×›×“×™ ×œ×˜×¤×œ ×‘×—×¡×™××•×ª
            const takenCards = getTakenCards();
            suitsGrid.innerHTML = ''; // × ×™×§×•×™ ×›×¤×ª×•×¨×™× ×§×•×“××™×
            
            const suits = ['h', 'd', 'c', 's'];
            suits.forEach(s => {
                const cardVal = selectedRank + s;
                const isTaken = takenCards.includes(cardVal);
                
                const btn = document.createElement('button');
                btn.className = 'suit-btn';
                btn.innerText = suitSymbols[s];
                // ×¦×‘×™×¢×ª ××“×•×/×©×—×•×¨
                btn.style.color = (s === 'h' || s === 'd') ? '#e74c3c' : '#2c3e50';
                
                if (isTaken) {
                    btn.disabled = true; // ×—×¡×™××ª ×›×¤×ª×•×¨
                } else {
                    btn.onclick = () => selectSuit(s);
                }
                
                suitsGrid.appendChild(btn);
            });
        }

        // --- ×©×œ×‘ 2: × ×‘×—×¨×” ×¦×•×¨×” ---
        function selectSuit(suit) {
            const colorClass = (suit === 'h' || suit === 'd') ? 'red' : 'black';
            
            // ×¢×“×›×•×Ÿ ×”-HTML ×©×œ ×”××©×‘×¦×ª
            currentSlot.innerHTML = `${selectedRank}${suitSymbols[suit]}`;
            currentSlot.className = `card-slot filled ${colorClass}`;
            currentSlot.dataset.value = selectedRank + suit; 

            closeSelector();
            calculate(); // ×”×¤×¢×œ×ª ×—×™×©×•×‘ ××™×™×“×™
        }

        // --- ×—×™×©×•×‘×™× ×•×œ×•×’×™×§×” ---
        function calculate() {
            // 1. ×”××¨×” ×œ×©×§×œ×™× (×™×—×¡ 1:10)
            const potChips = parseFloat(document.getElementById('pot-size').value) || 0;
            const callChips = parseFloat(document.getElementById('to-call').value) || 0;
            
            const potShekels = (potChips / 10).toLocaleString(); // ×”××¨×” + ×¤×¡×™×§×™×
            const callShekels = (callChips / 10).toLocaleString();
            
            document.getElementById('pot-money').innerText = `×©×•×•×™: â‚ª${potShekels}`;
            document.getElementById('call-money').innerText = `×©×•×•×™: â‚ª${callShekels}`;

            // 2. ×—×™×©×•×‘ Pot Odds
            let potOdds = 0;
            if (callChips > 0 && potChips > 0) {
                potOdds = (callChips / (potChips + callChips)) * 100;
            }

            // 3. ×—×™×©×•×‘ Equity (×¡×™××•×œ×¦×™×” ×›×¨×’×¢)
            // *×”×¢×¨×”:* ×›××Ÿ × ×›× ×¡×ª ×¡×¤×¨×™×™×ª ×¤×•×§×¨ ×××™×ª×™×ª ×‘×¢×ª×™×“
            let equity = simulateEquityLogic(); 

            updateDisplay(equity, potOdds);
        }

        function simulateEquityLogic() {
            // ×× ××™×Ÿ ×œ×¤×—×•×ª 2 ×§×œ×¤×™× ×‘×™×“ ×©×œ×™, ××™×Ÿ ×˜×¢× ×œ×—×©×‘
            const myHandSlots = document.querySelectorAll('#my-hand .card-slot.filled');
            if (myHandSlots.length < 2) return 0;
            
            // ××¡×¤×¨ ×¨× ×“×•××œ×™ ×‘×™×Ÿ 20 ×œ-80 ×œ×”×“×’××”
            return Math.floor(Math.random() * (80 - 20) + 20); 
        }

        function updateDisplay(equity, potOdds) {
            const equityEl = document.getElementById('equity-val');
            const potOddsEl = document.getElementById('pot-odds-val');
            const recBox = document.getElementById('recommendation-box');

            equityEl.innerText = equity > 0 ? equity + "%" : "--%";
            potOddsEl.innerText = potOdds > 0 ? potOdds.toFixed(1) + "%" : "--%";

            if (equity === 0 || potOdds === 0) {
                recBox.innerText = "×”×–×Ÿ × ×ª×•× ×™×...";
                recBox.style.color = "#bdc3c7";
                recBox.style.borderColor = "#bdc3c7";
                return;
            }

            // ×—×•×§×™ ×”×”××œ×¦×”
            if (equity > potOdds + 10) {
                recBox.innerText = "ğŸ”¥ RAISE / ALL-IN";
                recBox.style.color = "#2ecc71"; // ×™×¨×•×§
                recBox.style.borderColor = "#2ecc71";
            } else if (equity > potOdds) {
                recBox.innerText = "âœ… CALL (××©×ª×œ×)";
                recBox.style.color = "#f1c40f"; // ×¦×”×•×‘
                recBox.style.borderColor = "#f1c40f";
            } else {
                recBox.innerText = "âŒ FOLD (××¡×•×›×Ÿ)";
                recBox.style.color = "#e74c3c"; // ××“×•×
                recBox.style.borderColor = "#e74c3c";
            }
        }
    </script>
</body>
</html>
